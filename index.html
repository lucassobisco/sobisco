<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>SOBISCO | Digital Asset Core</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- FOUNDATION & RESET --- */
        * { -webkit-tap-highlight-color: transparent; user-select: none; box-sizing: border-box; }
        body { background: #000; color: #ffffff; font-family: -apple-system, system-ui, sans-serif; margin: 0; padding: 0; min-height: 100vh; overflow-x: hidden; }
        .ambient-bg { position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: -1; background: radial-gradient(circle at 50% 50%, #0f172a 0%, #000 100%); }
        
        /* --- HEADER MORPHING --- */
        .nav-header { 
            position: fixed; top: 0; left: 0; right: 0; 
            background: rgba(0, 0, 0, 0.75); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); 
            z-index: 100; padding: calc(env(safe-area-inset-top) + 15px) 20px 15px 20px; 
            border-bottom: 0.5px solid rgba(255, 255, 255, 0.08);
            transition: 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
        }
        body.scrolled .nav-header { padding-bottom: 10px; background: rgba(0, 0, 0, 0.9); }
        body.scrolled .brand-name { font-size: 22px; }
        body.scrolled .brand-logo { width: 32px; height: 32px; }
        body.scrolled .slogan, body.scrolled .ticker-container, body.scrolled .status-bar { 
            opacity: 0; height: 0; margin: 0; overflow: hidden; pointer-events: none; 
        }

        .header-top-layout { display: grid; grid-template-columns: 50px 1fr 50px; align-items: center; width: 100%; }
        .brand-logo { width: 44px; height: 44px; filter: drop-shadow(0 0 12px rgba(34, 211, 238, 0.8)); transition: 0.5s; }
        .brand-name { 
            font-size: 34px; font-weight: 900; letter-spacing: -1.5px; text-align: center;
            background: linear-gradient(180deg, #FFFFFF 0%, #FFD700 50%, #22D3EE 100%); 
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; 
            font-style: italic; line-height: 1; transition: 0.5s;
        }
        .slogan { font-size: 8px; font-weight: 800; letter-spacing: 4px; color: #475569; text-transform: uppercase; text-align: center; margin-top: 4px; transition: 0.3s; }
        
        .ticker-container { margin-top: 12px; overflow: hidden; white-space: nowrap; width: calc(100% + 40px); margin-left: -20px; height: 28px; background: rgba(34, 211, 238, 0.06); display: flex; align-items: center; }
        .ticker-wrapper { display: inline-block; padding-left: 100%; animation: tickerMove 40s linear infinite; font-size: 11px; font-weight: 800; color: #22d3ee; font-family: monospace; }
        @keyframes tickerMove { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

        /* --- CONTENT AREA & SECTIONS --- */
        .content-area { padding-top: 210px; padding-bottom: 120px; padding-left: 15px; padding-right: 15px; }
        .zone-header { font-size: 10px; font-weight: 900; letter-spacing: 2px; color: #64748b; margin: 25px 0 15px 10px; text-transform: uppercase; display: flex; align-items: center; gap: 8px; }
        .zone-header.ready { color: #ffd700; text-shadow: 0 0 10px rgba(255,215,0,0.3); }

        .coin-row { 
            background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            margin-bottom: 16px; padding: 18px; border-radius: 26px; display: flex; align-items: center; justify-content: space-between; 
            border: 1px solid rgba(255, 255, 255, 0.06); position: relative; overflow: hidden;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .claim-progress { position: absolute; bottom: 0; left: 0; height: 3px; transition: width 0.5s linear, background 0.5s ease; }
        .row-ready { border: 1.5px solid rgba(255, 215, 0, 0.4) !important; background: rgba(255, 215, 0, 0.05); }

        .coin-info-wrapper { display: flex; align-items: center; gap: 12px; flex: 1; min-width: 0; }
        .coin-text h2 { font-size: 16px; font-weight: 800; }
        .coin-text p { font-size: 9px; color: #64748b; font-weight: bold; text-transform: uppercase; }
        .est-time { font-size: 8px; color: #ffd700; opacity: 0.8; margin-top: 2px; display: block; }

        .btn-action-wrapper { display: flex; align-items: center; gap: 6px; flex-shrink: 0; margin-left: 10px; z-index: 10; }
        .btn-open-web { background: rgba(255,255,255,0.06); color: #fff; font-weight: 700; font-size: 9px; padding: 11px 12px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.1); text-transform: uppercase; }
        .btn-claim { background: #ffffff; color: #000; font-weight: 800; font-size: 11px; padding: 11px 18px; border-radius: 12px; min-width: 80px; text-align: center; cursor: pointer; border: none; }
        .timer-badge { color: #ffd700; font-family: monospace; font-size: 11px; font-weight: 800; background: rgba(0, 0, 0, 0.6); padding: 11px 12px; border-radius: 12px; border: 1px solid #ffd700; min-width: 80px; text-align: center; }

        .footer-brand { text-align: center; padding: 40px 0; opacity: 0.5; }
        .footer-brand p { font-size: 10px; letter-spacing: 2px; font-weight: 800; margin-bottom: 4px; }
        .footer-brand .email-text { font-size: 9px; color: #22d3ee; font-family: monospace; letter-spacing: 1px; }

        .tab-bar { position: fixed; bottom: 30px; left: 24px; right: 24px; height: 70px; background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(25px); border-radius: 35px; display: flex; align-items: center; justify-content: space-around; border: 1px solid rgba(255, 255, 255, 0.1); z-index: 1000; }
        .tab-item { text-align: center; color: #475569; font-size: 10px; font-weight: 700; cursor: pointer; transition: 0.3s; }
        .tab-item.active { color: #22d3ee; transform: translateY(-5px); }
        .hidden { display: none; }

        #claim-bubble {
            position: fixed; bottom: 120px; right: 24px; background: #ffd700; color: #000;
            padding: 12px 20px; border-radius: 50px; font-weight: 900; font-size: 10px;
            box-shadow: 0 10px 25px rgba(255,215,0,0.4); z-index: 999; transform: translateY(100px);
            transition: 0.5s cubic-bezier(0.2, 0.8, 0.2, 1); cursor: pointer;
        }
        #claim-bubble.show { transform: translateY(0); }
    </style>
</head>
<body onmousemove="handleInteractivity(event)" ontouchmove="handleInteractivity(event.touches[0])">

    <div class="ambient-bg"></div>

    <div class="nav-header" id="header-core">
        <div class="header-top-layout">
            <div class="brand-logo">
                <svg viewBox="0 0 100 100" fill="none"><defs><linearGradient id="logoS" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" style="stop-color:#22d3ee"/><stop offset="100%" style="stop-color:#0891b2"/></linearGradient></defs><path d="M30 35 C 30 22, 70 22, 70 35 C 70 47, 30 53, 30 65 C 30 78, 70 78, 70 65" stroke="url(#logoS)" stroke-width="12" stroke-linecap="round" stroke-linejoin="round" /></svg>
            </div>
            <div class="brand-name-container"><h1 class="brand-name">SOBISCO</h1></div>
            <div></div>
        </div>
        <p class="slogan">Digital Asset Core</p>
        <div class="ticker-container"><div id="ticker-wrapper" class="ticker-wrapper">SYNCING_MARKET_DATA...</div></div>
        <div class="status-bar" style="display:flex; justify-content:center; gap:6px; margin-top:8px;">
            <div style="width:6px; height:6px; background:#22d3ee; border-radius:50%; animation:pulse 2s infinite;"></div>
            <span id="status-label" style="font-size:8px; color:#22d3ee; font-family:monospace; font-weight:800;">CONNECTING...</span>
        </div>
    </div>

    <div id="claim-bubble" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">0 READY TO KLAIM</div>

    <div class="content-area" id="page-mining">
        <div id="ready-harvest-zone">
            <div class="zone-header ready"><span>✨</span> Ready to Harvest</div>
            <div id="ready-list"></div>
        </div>
        <div id="cooling-down-zone">
            <div class="zone-header"><span>⏳</span> Cooling Down</div>
            <div id="standby-list"></div>
        </div>
        <div class="footer-brand">
            <p>©2026 SOBISCO | DIGITAL ASSET CORE</p>
            <div class="email-text">email: sobisco@proton.me</div>
        </div>
    </div>

    <div class="content-area hidden" id="page-history">
        <div class="px-4 mb-6"><h2 class="text-xl font-black italic text-cyan-400">HISTORY LOGS</h2></div>
        <div id="history-list"></div>
    </div>

    <div class="tab-bar">
        <div class="tab-item opacity-20"><svg class="w-6 h-6 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/></svg>WALLET</div>
        <div class="tab-item active" id="tab-mining" onclick="switchTab('mining')"><svg class="w-7 h-7 mx-auto mb-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.381z"/></svg>MINING</div>
        <div class="tab-item" id="tab-history" onclick="switchTab('history')"><svg class="w-6 h-6 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>HISTORY</div>
    </div>

    <script>
        const coins = [
            { id: 'btc', name: 'Bitcoin', host: 'freebitco.in', logo: 'bitcoin-btc', cgId: 'bitcoin' },
            { id: 'sol', name: 'Solana', host: 'solpick.io', logo: 'solana-sol', cgId: 'solana' },
            { id: 'ltc', name: 'Litecoin', host: 'litepick.io', logo: 'litecoin-ltc', cgId: 'litecoin' },
            { id: 'ton', name: 'Toncoin', host: 'tonpick.game', logo: 'toncoin-ton', cgId: 'the-open-network' },
            { id: 'bnb', name: 'Binance', host: 'bnbpick.io', logo: 'binance-coin-bnb', cgId: 'binancecoin' },
            { id: 'sui', name: 'Sui', host: 'suipick.io', logo: 'sui-sui', cgId: 'sui' },
            { id: 'trx', name: 'Tron', host: 'tronpick.io', logo: 'tron-trx', cgId: 'tron' },
            { id: 'doge', name: 'Dogecoin', host: 'dogepick.io', logo: 'dogecoin-doge', cgId: 'dogecoin' },
            { id: 'f_btc', name: 'Free BTC', host: 'freebtcco.in/faucet', logo: 'bitcoin-btc', cgId: 'bitcoin' },
            { id: 'usdt', name: 'Tether USD', host: 'usdpick.io/faucet', logo: 'tether-usdt', cgId: 'tether' },
            { id: 'f_bch', name: 'Free BCH', host: 'freebch.in/faucet', logo: 'bitcoin-cash-bch', cgId: 'bitcoin-cash' },
            { id: 'f_arb', name: 'Free ARB', host: 'freearb.in/faucet', logo: 'arbitrum-arb', cgId: 'arbitrum' },
            { id: 'f_xrp', name: 'Free XRP', host: 'freexrp.in/faucet', logo: 'xrp-xrp', cgId: 'xrp' },
            { id: 'f_sui', name: 'Free SUI', host: 'freesui.in/faucet', logo: 'sui-sui', cgId: 'sui' },
            { id: 'f_trx', name: 'Free TRX', host: 'freetron.in/faucet', logo: 'tron-trx', cgId: 'tron' },
            { id: 'f_shib', name: 'Free SHIB', host: 'freeshib.in/faucet', logo: 'shiba-inu-shib', cgId: 'shiba-inu' },
            { id: 'f_trum', name: 'Free TRUMP', host: 'freetrump.in/faucet', logo: 'trump-coin-trump', cgId: 'maga' },
            { id: 'f_bnb', name: 'Free BNB', host: 'freebnb.in/faucet', logo: 'binance-coin-bnb', cgId: 'binancecoin' },
            { id: 'f_ton', name: 'Free TON', host: 'freetoncoin.in/faucet', logo: 'toncoin-ton', cgId: 'the-open-network' }
        ];

        let serverTimeOffset = 0;
        let lastMouseY = window.innerHeight / 2;
        let lastReadyCount = -1;
        const chime = new Audio('https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3');

        async function syncServerTime() {
            try {
                const start = Date.now();
                const res = await fetch('https://worldtimeapi.org/api/timezone/Etc/UTC');
                const data = await res.json();
                const end = Date.now();
                serverTimeOffset = new Date(data.datetime).getTime() - (end - ((end - start) / 2));
                document.getElementById('status-label').innerText = 'CORE_SYNC_OPTIMAL';
                updatePrices();
            } catch (e) { document.getElementById('status-label').innerText = 'LOCAL_TIME_ACTIVE'; }
        }

        async function updatePrices() {
            try {
                const ids = [...new Set(coins.map(c=>c.cgId))].join(',');
                const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd`);
                const data = await res.json();
                document.getElementById('ticker-wrapper').innerHTML = coins.slice(0,8).map(c => 
                    `${c.id.toUpperCase()}: $${data[c.cgId].usd.toLocaleString()} &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;`
                ).join('') + " | SOBISCO_LIVE_CORE | ";
            } catch (e) {}
        }

        function handleInteractivity(e) {
            if (!e) return;
            lastMouseY = e.clientY || lastMouseY;
            document.querySelectorAll('.coin-row').forEach(row => {
                const rect = row.getBoundingClientRect();
                const distance = Math.abs(lastMouseY - (rect.top + rect.height/2));
                const ratio = Math.max(0, 1 - (distance / 300));
                row.style.transform = `scale(${0.94 + (Math.pow(ratio,2) * 0.06)})`;
                row.style.opacity = 0.5 + (ratio * 0.5);
            });
        }

        function initUI() {
            // Container awal dikosongkan, akan diisi oleh updateTimers
            document.getElementById('ready-list').innerHTML = '';
            document.getElementById('standby-list').innerHTML = '';
            
            // Buat elemen row sekali saja
            coins.forEach(coin => {
                const row = document.createElement('div');
                row.className = 'coin-row';
                row.id = `row-${coin.id}`;
                row.innerHTML = `
                    <div class="coin-info-wrapper">
                        <img src="https://cryptologos.cc/logos/${coin.logo}-logo.png" class="w-10 h-10" onerror="this.src='https://cdn-icons-png.flaticon.com/512/2585/2585189.png'">
                        <div class="coin-text">
                            <h2>${coin.name}</h2>
                            <p>${coin.host.split('/')[0]}</p>
                            <span class="est-time" id="est-${coin.id}"></span>
                        </div>
                    </div>
                    <div class="btn-action-wrapper" id="area-${coin.id}"></div>
                    <div class="claim-progress" id="prog-${coin.id}"></div>
                `;
                // Tempel sementara di standby
                document.getElementById('standby-list').appendChild(row);
            });
        }

        function updateTimers() {
            const now = Date.now() + serverTimeOffset;
            let readyCount = 0;
            
            // 1. Ambil data status tiap koin
            const coinStatus = coins.map(coin => {
                const next = parseInt(localStorage.getItem(`claim_${coin.id}`)) || 0;
                return { ...coin, next, isReady: now >= next, diff: next - now };
            });

            // 2. Sorting Logic
            // Ready List: Bebas (berdasarkan urutan asli)
            // Standby List: Urutan berdasarkan sisa waktu (diff) terkecil ke terbesar
            const readyCoins = coinStatus.filter(c => c.isReady);
            const standbyCoins = coinStatus.filter(c => !c.isReady).sort((a, b) => a.diff - b.diff);

            const readyList = document.getElementById('ready-list');
            const standbyList = document.getElementById('standby-list');

            // 3. Update UI & Pindahkan Row sesuai urutan hasil sorting
            readyCoins.forEach(coin => {
                readyCount++;
                const row = document.getElementById(`row-${coin.id}`);
                const area = document.getElementById(`area-${coin.id}`);
                const prog = document.getElementById(`prog-${coin.id}`);
                const est = document.getElementById(`est-${coin.id}`);
                const openBtn = `<button onclick="secureOpen('https://${coin.host}')" class="btn-open-web">Open</button>`;

                area.innerHTML = openBtn + `<button onclick="claim('${coin.id}','${coin.name}','${coin.host}')" class="btn-claim">Klaim</button>`;
                if (prog) { prog.style.width = '100%'; prog.style.background = '#ffd700'; }
                if (est) est.innerText = 'STATUS: READY TO CORE';
                row.classList.add('row-ready');
                
                // Masukkan ke DOM sesuai urutan sorting
                readyList.appendChild(row); 
            });

            standbyCoins.forEach(coin => {
                const row = document.getElementById(`row-${coin.id}`);
                const area = document.getElementById(`area-${coin.id}`);
                const prog = document.getElementById(`prog-${coin.id}`);
                const est = document.getElementById(`est-${coin.id}`);
                const openBtn = `<button onclick="secureOpen('https://${coin.host}')" class="btn-open-web">Open</button>`;

                area.innerHTML = openBtn + `<div class="timer-badge">${Math.floor(coin.diff/60000)}m ${Math.floor((coin.diff%60000)/1000)}s</div>`;
                if (est) est.innerText = `Matang jam ${new Date(coin.next).getHours().toString().padStart(2,'0')}:${new Date(coin.next).getMinutes().toString().padStart(2,'0')}`;
                row.classList.remove('row-ready');
                if (prog) {
                    prog.style.width = (coin.diff / 3600000 * 100) + '%';
                    prog.style.background = 'linear-gradient(90deg, transparent, #22d3ee)';
                }
                
                // Masukkan ke DOM sesuai urutan sorting (yang tercepat di atas)
                standbyList.appendChild(row);
            });

            // Update Bubble & Title
            const bubble = document.getElementById('claim-bubble');
            bubble.innerText = `${readyCount} READY TO KLAIM`;
            readyCount > 0 ? bubble.classList.add('show') : bubble.classList.remove('show');
            document.title = readyCount > 0 ? `(${readyCount}) SOBISCO` : 'SOBISCO | DAC';
            if (readyCount > lastReadyCount && lastReadyCount !== -1) chime.play().catch(()=>{});
            lastReadyCount = readyCount;
        }

        function secureOpen(url) {
            if (navigator.vibrate) navigator.vibrate(30);
            setTimeout(() => window.open(url, '_blank'), 500);
        }

        function claim(id, name, host) {
            if (navigator.vibrate) navigator.vibrate([50, 30, 50]);
            chime.play().catch(()=>{});
            const nextTime = Date.now() + serverTimeOffset + 3600000;
            localStorage.setItem(`claim_${id}`, nextTime);
            const hist = JSON.parse(localStorage.getItem('claim_history') || '[]');
            hist.push({ name, time: new Date().toLocaleTimeString(), date: new Date().toLocaleDateString() });
            localStorage.setItem('claim_history', JSON.stringify(hist.slice(-50)));
            setTimeout(() => { window.open(`https://${host}`, '_blank'); updateTimers(); }, 600);
        }

        function renderHistory() {
            const hist = JSON.parse(localStorage.getItem('claim_history') || '[]');
            document.getElementById('history-list').innerHTML = hist.slice().reverse().map(i => `
                <div class="coin-row" style="opacity:1; transform:scale(1)">
                    <div class="coin-text"><h2>${i.name}</h2><p>${i.date} | ${i.time}</p></div>
                    <div class="text-[10px] font-black text-cyan-400">CORE_SUCCESS</div>
                </div>
            `).join('') || '<p class="text-center opacity-30 mt-10">No history found</p>';
        }

        function switchTab(t) {
            document.getElementById('page-mining').classList.toggle('hidden', t !== 'mining');
            document.getElementById('page-history').classList.toggle('hidden', t !== 'history');
            document.getElementById('tab-mining').classList.toggle('active', t === 'mining');
            document.getElementById('tab-history').classList.toggle('active', t === 'history');
            if (t === 'history') renderHistory();
        }

        window.addEventListener('scroll', () => {
            document.body.classList.toggle('scrolled', window.scrollY > 40);
        });

        window.onload = () => {
            syncServerTime();
            initUI();
            setInterval(updateTimers, 1000);
            setInterval(updatePrices, 60000);
        };
    </script>
</body>
</html>
