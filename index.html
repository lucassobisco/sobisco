<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>SOBISCO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- CORE STYLE --- */
        * { -webkit-tap-highlight-color: transparent; user-select: none; }
        body { background: #000; color: #ffffff; font-family: -apple-system, system-ui, sans-serif; margin: 0; padding: 0; min-height: 100vh; overflow-x: hidden; }
        .ambient-bg { position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: -1; background: radial-gradient(circle at 50% 50%, #0f172a 0%, #000 100%); }
        
        .nav-header { position: fixed; top: 0; left: 0; right: 0; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px); z-index: 100; padding: env(safe-area-inset-top) 20px 20px 20px; border-bottom: 0.5px solid rgba(255, 255, 255, 0.05); text-align: center; transition: 0.5s cubic-bezier(0.2, 0.8, 0.2, 1); }
        .brand-logo { position: absolute; left: 20px; top: 50%; transform: translateY(-50%); width: 44px; height: 44px; filter: drop-shadow(0 0 12px rgba(34, 211, 238, 0.9)); transition: 0.5s; }
        .brand-name { font-size: 36px; font-weight: 900; letter-spacing: -1.5px; background: linear-gradient(to bottom, #fff 50%, #94a3b8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-style: italic; transition: 0.5s; line-height: 1; }
        .slogan { font-size: 9px; font-weight: 700; letter-spacing: 3px; color: #64748b; text-transform: uppercase; margin-top: 8px; transition: 0.4s; }
        
        body.scrolled .nav-header { padding-bottom: 12px; background: rgba(0, 0, 0, 0.85); }
        body.scrolled .brand-name { font-size: 24px; }
        body.scrolled .brand-logo { width: 34px; height: 34px; }
        body.scrolled .slogan, body.scrolled .status-bar { opacity: 0; transform: translateY(-10px); height: 0; margin: 0; overflow: hidden; }

        .status-bar { display: flex; align-items: center; justify-content: center; gap: 6px; margin-top: 10px; transition: 0.3s; }
        .status-dot { width: 6px; height: 6px; background: #22d3ee; border-radius: 50%; box-shadow: 0 0 10px #22d3ee; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }
        .status-text { font-size: 8px; font-weight: 800; color: #22d3ee; font-family: monospace; }

        .content-area { padding-top: calc(env(safe-area-inset-top) + 160px); padding-bottom: 150px; padding-left: 20px; padding-right: 20px; }

        .coin-row { 
            background: rgba(255, 255, 255, 0.03); 
            backdrop-filter: blur(15px); 
            margin-bottom: 16px; 
            padding: 20px; 
            border-radius: 28px; 
            display: flex; 
            align-items: center; 
            justify-content: space-between; 
            border: 1px solid rgba(255, 255, 255, 0.07); 
            position: relative; 
            transition: transform 0.6s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.6s ease;
            will-change: transform, opacity;
        }

        .btn-claim { background: #ffffff; color: #000; font-weight: 800; font-size: 12px; padding: 12px 24px; border-radius: 16px; box-shadow: 0 4px 15px rgba(255,255,255,0.15); }
        .timer-badge { color: #22d3ee; font-family: monospace; font-size: 11px; font-weight: 800; background: rgba(34, 211, 238, 0.1); padding: 8px 14px; border-radius: 12px; border: 1px solid rgba(34, 211, 238, 0.2); }
        .claim-progress { position: absolute; bottom: 0; left: 0; height: 2px; background: linear-gradient(90deg, transparent, #22d3ee); transition: width 0.5s ease; }

        .tab-bar { position: fixed; bottom: 30px; left: 24px; right: 24px; height: 72px; background: rgba(15, 23, 42, 0.9); backdrop-filter: blur(25px); border-radius: 36px; display: flex; align-items: center; justify-content: space-around; border: 1px solid rgba(255, 255, 255, 0.1); z-index: 1000; }
        .tab-item { text-align: center; color: #475569; font-size: 10px; font-weight: 700; cursor: pointer; }
        .tab-item.active { color: #fff; }
        .hidden { display: none; }
    </style>
</head>
<body onmousemove="handleInteractivity(event)" ontouchmove="handleInteractivity(event.touches[0])">

    <div class="ambient-bg"></div>

    <div class="nav-header">
        <div class="brand-logo">
            <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M35 25 H75 V40 H50 V48 H75 V75 H25 V60 H50 V52 H30 L30 25 H35Z" fill="#22d3ee" />
                <rect x="20" y="30" width="8" height="2" fill="#22d3ee" opacity="0.8"/>
                <rect x="15" y="45" width="10" height="2" fill="#22d3ee" opacity="0.6"/>
                <rect x="18" y="60" width="8" height="2" fill="#22d3ee" opacity="0.4"/>
                <circle cx="15" cy="31" r="2" fill="#22d3ee" />
                <circle cx="10" cy="46" r="2" fill="#22d3ee" />
                <circle cx="13" cy="61" r="2" fill="#22d3ee" />
            </svg>
        </div>
        <h1 class="brand-name">SOBISCO</h1>
        <p class="slogan">Digital Asset Core</p>
        <div class="status-bar">
            <div class="status-dot"></div>
            <span class="status-text" id="status-label">CORE_SYNCING...</span>
        </div>
    </div>

    <div class="content-area" id="mining-page"><div id="coin-list"></div></div>
    <div class="content-area hidden" id="history-page"><div id="history-list"></div></div>

    <div class="tab-bar">
        <div class="tab-item opacity-20"><svg class="w-6 h-6 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/></svg>WALLET</div>
        <div class="tab-item active" id="tab-mining" onclick="switchTab('mining')"><svg class="w-7 h-7 mx-auto mb-0.5" fill="currentColor" viewBox="0 0 20 20"><path d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.381z"/></svg>MINING</div>
        <div class="tab-item" id="tab-history" onclick="switchTab('history')"><svg class="w-6 h-6 mx-auto mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>HISTORY</div>
    </div>

    <script>
        const coins = [
            { id: 'btc', name: 'Bitcoin', host: 'freebitco.in', logo: 'bitcoin-btc' },
            { id: 'sol', name: 'Solana', host: 'solpick.io', logo: 'solana-sol' },
            { id: 'ltc', name: 'Litecoin', host: 'litepick.io', logo: 'litecoin-ltc' },
            { id: 'ton', name: 'Toncoin', host: 'tonpick.game', logo: 'toncoin-ton' },
            { id: 'bnb', name: 'Binance', host: 'bnbpick.io', logo: 'binance-coin-bnb' },
            { id: 'sui', name: 'Sui', host: 'suipick.io', logo: 'sui-sui' },
            { id: 'trx', name: 'Tron', host: 'tronpick.io', logo: 'tron-trx' },
            { id: 'doge', name: 'Dogecoin', host: 'dogepick.io', logo: 'dogecoin-doge' }
        ];

        let serverTimeOffset = 0;
        let currentTab = 'mining';
        let lastMouseY = window.innerHeight / 2;

        async function syncTime() {
            try {
                const response = await fetch('https://worldtimeapi.org/api/timezone/Etc/UTC');
                const data = await response.json();
                serverTimeOffset = new Date(data.datetime).getTime() - Date.now();
                document.getElementById('status-label').innerText = 'CORE_SYNC_OPTIMAL';
                if (Notification.permission === "default") Notification.requestPermission();
            } catch (e) { document.getElementById('status-label').innerText = 'LOCAL_MODE_ACTIVE'; }
        }
        syncTime();

        function handleInteractivity(e) {
            if (!e) return;
            lastMouseY = e.clientY || lastMouseY;
            const rows = document.querySelectorAll('.coin-row');
            rows.forEach(row => {
                const rect = row.getBoundingClientRect();
                const rowCenterY = rect.top + rect.height / 2;
                const distance = Math.abs(lastMouseY - rowCenterY);
                const maxDist = 300;
                let scale = 0.94; let opacity = 0.5;
                if (distance < maxDist) {
                    const ratio = Math.pow(1 - (distance / maxDist), 2);
                    scale = 0.94 + (ratio * 0.12);
                    opacity = 0.5 + (ratio * 0.5);
                }
                row.style.transform = `scale(${scale})`;
                row.style.opacity = opacity;
            });
        }

        window.addEventListener('scroll', () => {
            if (window.scrollY > 40) document.body.classList.add('scrolled');
            else document.body.classList.remove('scrolled');
            requestAnimationFrame(() => handleInteractivity({ clientY: lastMouseY }));
        });

        function switchTab(t) {
            currentTab = t;
            document.getElementById('mining-page').classList.toggle('hidden', t !== 'mining');
            document.getElementById('history-page').classList.toggle('hidden', t !== 'history');
            document.querySelectorAll('.tab-item').forEach(el => el.classList.remove('active'));
            if(t === 'mining') document.getElementById('tab-mining').classList.add('active');
            if(t === 'history') document.getElementById('tab-history').classList.add('active');
            renderUI();
        }

        function renderUI() {
            const now = Date.now() + serverTimeOffset;
            if (currentTab === 'mining') {
                const container = document.getElementById('coin-list');
                
                // SMART SORT: Siap klaim naik ke atas
                const sorted = [...coins].sort((a, b) => {
                    const nextA = localStorage.getItem(`claim_${a.id}`) || 0;
                    const nextB = localStorage.getItem(`claim_${b.id}`) || 0;
                    const readyA = now >= nextA;
                    const readyB = now >= nextB;
                    return readyB - readyA; 
                });

                container.innerHTML = sorted.map(coin => `
                    <div class="coin-row" id="row-${coin.id}">
                        <div class="flex items-center gap-4">
                            <div class="bg-white/5 w-12 h-12 rounded-2xl flex items-center justify-center border border-white/10">
                                <img src="https://cryptologos.cc/logos/${coin.logo}-logo.png" class="w-8 h-8">
                            </div>
                            <div>
                                <h2 class="font-bold text-[17px] tracking-tight">${coin.name}</h2>
                                <p class="text-[10px] text-slate-500 font-bold uppercase tracking-widest">${coin.host}</p>
                            </div>
                        </div>
                        <div id="btn-area-${coin.id}"></div>
                        <div class="claim-progress" id="prog-${coin.id}"></div>
                    </div>
                `).join('');
                updateDynamicElements();
            } else {
                const hist = JSON.parse(localStorage.getItem('claim_history') || '[]');
                document.getElementById('history-list').innerHTML = hist.length ? hist.slice().reverse().map(i => {
                    const c = coins.find(x => x.name === i.name) || {logo: 'generic'};
                    return `<div class="coin-row"><div class="flex items-center gap-4"><div class="bg-white/5 w-10 h-10 rounded-xl flex items-center justify-center border"><img src="https://cryptologos.cc/logos/${c.logo}-logo.png" class="w-6 h-6"></div><div><h2 class="font-bold text-sm">${i.name}</h2><p class="text-[9px] text-slate-500">${i.time}</p></div></div><div class="text-[10px] font-black text-cyan-400">CLAIM_SUCCESS</div></div>`;
                }).join('') : '<div class="text-center opacity-30 mt-20 font-bold text-sm">NO_HISTORY</div>';
            }
            handleInteractivity({ clientY: lastMouseY });
        }

        function updateDynamicElements() {
            const now = Date.now() + serverTimeOffset;
            coins.forEach(coin => {
                const next = localStorage.getItem(`claim_${coin.id}`);
                const btnArea = document.getElementById(`btn-area-${coin.id}`);
                const progBar = document.getElementById(`prog-${coin.id}`);
                if (btnArea) {
                    if (next && now < next) {
                        const d = next - now;
                        btnArea.innerHTML = `<div class="timer-badge">${Math.floor(d/60000)}m ${Math.floor((d%60000)/1000)}s</div>`;
                        progBar.style.width = ((d/3600000)*100) + '%';
                    } else {
                        btnArea.innerHTML = `<button onclick="doClaim('${coin.id}','https://${coin.host}','${coin.name}')" class="btn-claim">Klaim</button>`;
                        progBar.style.width = '0%';
                    }
                }
            });
        }

        function doClaim(id, url, name) {
            if (navigator.vibrate) navigator.vibrate(40); 
            localStorage.setItem(`claim_${id}`, (Date.now() + serverTimeOffset) + 3600000);
            const history = JSON.parse(localStorage.getItem('claim_history') || '[]');
            history.push({ name, time: new Date().toLocaleTimeString() });
            localStorage.setItem('claim_history', JSON.stringify(history.slice(-20)));
            
            setTimeout(() => {
                if (Notification.permission === "granted") {
                    new Notification("SOBISCO", { body: `Siap klaim di ${name}!`, icon: "https://cryptologos.cc/logos/bitcoin-btc-logo.png" });
                }
            }, 3600000);

            renderUI(); 
            window.location.href = url;
        }

        setInterval(() => {
            const now = Date.now() + serverTimeOffset;
            let needResort = false;
            coins.forEach(c => {
                const next = localStorage.getItem(`claim_${c.id}`);
                if (next && Math.abs(now - next) < 1000) needResort = true;
            });
            if (needResort) renderUI();
            else updateDynamicElements();
        }, 1000);

        window.onload = () => renderUI();
    </script>
</body>
</html>
